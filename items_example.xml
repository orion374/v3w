<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<items>
<item>
<title>plugin.video.live.streamspro</title>
<link>no</link>

<regex>
<name>ip</name>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):#vbprofi
 ip = re.findall('Deine IP.*?b>(.*?)<br' , page_data)[0]
 land = re.findall('Deine IP.*?b>.*?br>(.*?)<h1', page_data)[0]
 return ip + ' ' + land
]]></expres>
<!-- <expres>Deine IP.*?b(.*?)br(.*?)h1</expres> -->
<page>https://vbprofi.lima-city.de/</page>
</regex>
</item>




<item>
<title>[COLOR lime][B]   CANASAT    [/B][/COLOR]</title>
<link>no</link>
<externallink>https://vbprofi.lima-city.de/xml4/mediathek.xml</externallink>
</item>

<item>
<title>[COLOR lime][B]   CANASAT    [/B][/COLOR]</title>
<link>no</link>
<externallink>https://vbprofi.lima-city.de/xml4/mediathek.xml</externallink>
</item>

<item>
<title>[COLOR lime][B]   CANASAT    [/B][/COLOR]</title>
<link>no</link>
<externallink>https://vbprofi.lima-city.de/xml4/mediathek.xml</externallink>
</item>














<item>
<title>[COLOR cyan][/COLOR]</title>
<link>$doregex[makelist]</link>

<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[COLOR cyan] [makelist.param2] [/COLOR]</title>
<link>$doregex[play]|referer=http://jintv.net[makelist.param1]</link>
<thumbnail>n/a</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):
    return re.findall('(?s)thumb.*?href="(/de/.*?)".*?"img.*?class="name_or_title">(.*?)</span>', page_data)
]]></expres>
<page></page>
<cookieJar></cookieJar>
</regex>

<regex>
<name></name>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):
    #return re.findall('src="(.*?\.MP4.*?)"', page_data)[0] #'|type="video/mp4"'
    return re.findall('src="(.*?\.MP4.*?)"', page_data)[0].replace('&amp;', '&')
]]></expres>
<page></page>
<referer></referer>
<cookieJar></cookieJar>
<agent>Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:61.0) Gecko/20100101 Firefox/61.0</agent>
</regex>
</item>



<item>
<title></title>
<link>no</link>
<externallink></externallink>
</item>




<item>
<title></title>
<link></link>
<info>
Dengê Çira Şengalê
von 7 bis 21 Uhr Ortszeit

Homepage: http://cira.fm/

Direkte Seite:
http://cira.fm/player/

Shutcast link zu finden in:
http://cira.fm/player/player.js?build=12000
</info>
</item>



<item>
<title></title>
<link></link>

<regex>
<name></name>
<expres></expres>
<page></page>
<cookieJar></cookieJar>
</regex>
</item>


<item>
<title></title>
<link></link>
<link></link>
<!--
<link></link>
<link></link>
$$LSPlayOnlyOne$$
<link></link>
<link></link>
<link></link>
-->
<agent>Mozilla/5.0 (iPhone; CPU iPhone OS 9_2 like Mac OS X) AppleWebKit/601.1 (KHTML, like Gecko) CriOS/47.0.2526.70 Mobile/13C71 Safari/601.1.46</agent>
<cookieJar></cookieJar>
</item>

<item>
<title></title>
<link></link>
<link></link>
<!--
<link></link>
$$LSPlayOnlyOne$$
<link></link>

-->
<agent>Mozilla/5.0 (iPhone; CPU iPhone OS 9_2 like Mac OS X) AppleWebKit/601.1 (KHTML, like Gecko) CriOS/47.0.2526.70 Mobile/13C71 Safari/601.1.46</agent>
<cookieJar></cookieJar>
</item>



<item>
<title>/title>
<link></link>
<!-- <link></link> -->
<info>Homepage:
https://jintv.net/
</info>
<agent>Mozilla/5.0 (iPhone; CPU iPhone OS 9_2 like Mac OS X) AppleWebKit/601.1 (KHTML, like Gecko) CriOS/47.0.2526.70 Mobile/13C71 Safari/601.1.46</agent>
<cookieJar></cookieJar>
</item>




<item>
<title></title>
<!--
<link></link>
-->
<link></link>
<info>Med Muzîk – Deng û Rengên Mezopotamya
Homepage:
http://medmuzik.tv/
</info>
</item>



<item>
<title></title>
<link>$doregex[m5]|User-Agent=Mozilla/5.0&amp;Accept=*/*&amp;Origin=https://karwan.tv&amp;Referer=https://karwan.tv/live/cira-tv-1.php</link>
<regex>
<name>m5</name>
<expres><![CDATA["(https://live.karwan.tv/.*?m3u8.*?)"]]></expres>
<!-- <expres>source[\w\W]*?src="([^"]+)</expres> -->
<page></page>
<connection></connection>
<agent>Mozilla/5.0</agent>
<accept></accept>
<referer></referer>
</regex>

<regex>
<name></name>
<expres><![CDATA[#$pyFunction
import re,requests
def GetLSProData(page_data,Cookie_Jar,m):
  source = requests.get('https://karwan.tv/ronahi-tv.html', headers={'user-agent':'Mozilla/5.0', 'referer':'https://karwan.tv/ronahi-tv.html', 'accept':'*/*'},verify=False).text.replace('\\', '')
  strurl = re.findall('"(https://live.karwan.tv/.*?m3u8.*?)"', source)[0]
  return ('%s|user-agent=ipad&origin=https://karwan.tv/ronahi-tv.html&referer=https://karwan.tv/ronahi-tv.html' % strurl)
]]></expres>
<page></page>
</regex>
</item>



<item>
<title></title>
<fanart></fanart>
<thumbnail></thumbnail>
<link></link>
<link></link>
<regex>
<name>m5</name>
<expres></expres>
<page></page>
<connection></connection>
<agent></agent>
<accept></accept>
<referer></referer>
</regex>
</item>




<item>
<title></title>
<fanart></fanart>
<thumbnail></thumbnail>
<link></link>
<!-- <link></link> -->
<regex>
<name>m5</name>
<expres></expres>
<!-- <expres>file: "([^"]+)</expres> -->
<page></page>
<connection></connection>
<agent></agent>
<accept></accept>
<referer></referer>
</regex>

<regex>
<name></name>
<expres><![CDATA[#$pyFunction
import re,requests
def GetLSProData(page_data,Cookie_Jar,m):
  source = requests.get('https://karwan.tv/zarok-tv.html',headers={'user-agent':'Mozilla/5.0','referer':'https://karwan.tv/zarok-tv.html','accept':'*/*'},verify=False).text.replace('\\', '')
  strurl = re.findall('"data":.+?src":"([^"]+)', source)[0]
  return ('%s|user-agent=ipad&origin=https://karwan.tv/zarok-tv.html&referer=https://karwan.tv/zarok-tv.html' % strurl)
]]></expres>
<page></page>
</regex>
</item>



<item>
<title></title>
<fanart></fanart>
<thumbnail></thumbnail>
<link></link>
<regex>
<name></name>
<expres></expres>
<page></page>
<connection></connection>
<agent></agent>
<accept></accept>
<referer></referer>
</regex>
</item>




<item>
<title></title>
<fanart></fanart>
<thumbnail></thumbnail>
<link></link>
<regex>
<name>m5</name>
<expres></expres>
<page></page>
<connection></connection>
<agent></agent>
<accept></accept>
<referer></referer>
</regex>
</item>




<item>
<title></title>
<link></link>

<regex>
<name></name>
<listrepeat><![CDATA[
<title></title>
  <link></link>
<thumbnail></thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re, requests
from operator import itemgetter, attrgetter
def GetLSProData(page_data,Cookie_Jar,m):
 source = requests.get('https://karwan.tv/', headers={'user-agent':'Mozilla/5.0', 'referer':'https://karwan.tv/', 'accept':'*/*'},verify=False).text.replace('\\', '')
 for i in range(2, 5):
  source = source + requests.get('https://karwan.tv/page/' + str(i), headers={'user-agent':'Mozilla/5.0', 'referer':'https://karwan.tv/', 'accept':'*/*'},verify=False).text.replace('\\', '')

 #strurl = re.findall('"(https://live.karwan.tv/.*?m3u8.*?)"', source)[0]
 # items = re.findall('class="bt-inner".+?title="\s*([^"]+)\s*".+?href="([^"]+).+?src="([^"]+)', page_data,re.DOTALL)
 # items = re.findall('<a href="(.*?)"><img.*?src="(.*?)".*?alt="(.*?)"', page_data, re.DOTALL)
 # items = re.findall('<a href="([^"]+)"><img.*?src="(.*?)".*?alt="(.*?)"', page_data, re.DOTALL)
 #items = re.findall('href="(.*?)".*?<img.*?src="(.*?)".*?alt="(.*?)"', page_data, re.DOTALL)
 #items = re.findall('vb-itemthumb.*?href="(.*?)".*?<img.*?src="(.*?)".*?alt="(.*?)"', page_data, re.DOTALL)

 #items = re.findall('itemprop\="thumbnailUrl" content\="(.*?)".*?<h2 class.*?href\="(.*?)" title\="(.*?)".*?</h2>', source, re.DOTALL) #(?s)
 items = re.findall('(?s)<a href="(.*?)" title="(.*?)".*?alt="(.*?).*?</a>', source, re.DOTALL) #(?s)

 mylist = ['Ronah', 'Medya', 'ira', 'rk tv', 'Aryen', 'JIN', 'Zarok', 'Med M', 'Arti', 'Can', 'Yol']
 chs = []

 for url, title, thumb in items:
  if any([x.lower() in title.lower() for x in mylist]):
   title = '00' + title
  else:
   title = '99' + title
  chs.append((url, title, thumb))

 myorder = []
 for url, title, thumb in sorted(chs, reverse=False, key=itemgetter(1)):
  myorder.append((url, title[2:], thumb))

 return myorder
]]></expres>
<page></page>
<cookieJar></cookieJar>
<connection></connection>
<agent></agent>
<accept></accept>
<referer></referer>
</regex>

<regex>
<name>getURL</name>
<expres><![CDATA[#$pyFunction
import re, requests
def GetLSProData(page_data,Cookie_Jar,m):
  url = '[makelist.param1]'
  source = requests.get(url, headers={'user-agent':'Mozilla/5.0', 'referer':url, 'accept':'*/*'},verify=False).text.replace('\\', '')

  if 'vp-embed-2 multi-sources' in source:
    url = 'https://karwan.tv' + re.findall('vp-embed-2 multi-sources.*?src="(.*?)"', source)[0]
    source = requests.get(url, headers={'user-agent':'Mozilla/5.0', 'referer':url, 'accept':'*/*'},verify=False).text.replace('\\', '')
  elif 'data-wpfc-original-src="' in source:
    url = 'https://karwan.tv' + re.findall('data-wpfc-original-src="(.*?)"', source)[0]
    source = requests.get(url, headers={'user-agent':'Mozilla/5.0', 'referer':url, 'accept':'*/*'},verify=False).text.replace('\\', '')
  else:
    strurl = re.findall('"(https://live.karwan.tv/.*?m3u8.*?)"', source)[0]

  strurl = re.findall('"(https://live.karwan.tv/.*?m3u8.*?)"', source)[0]
  return strurl +'|user-agent=ipad&origin='+ url +'&referer='+ url
]]></expres>
<page></page>
</regex>
</item>



<!--
<item>
<title></title>
<link></link>
<externallink></externallink>
<externallink></externallink>
</item>
-->



 <item>
    <title></title>
<link></link>
<externallink></externallink>
</item>




<item>
<title></title>
<link></link>
</item>




<item>
<title></title>
<link></link>

<regex>
<name></name>
<listrepeat><![CDATA[
<title></title>
<link>no</link>
<externallink></externallink>
<info></info>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
import HTMLParser
import sys
reload(sys)
sys.setdefaultencoding("utf-8")
def GetLSProData(page_data,Cookie_Jar,m):#vbprofi
 parser = HTMLParser.HTMLParser()
 s = re.sub("(&.+?;)", lambda m: parser.unescape(m.group()), page_data)
 s1 = re.findall(r'(?s)<item>\n<title>(.*?)</title>\n<description>(.*?)</description>\n<link>(.*?)</link>\n<pubDate>(.*?)</pubDate>\n<guid>(.*?)</guid>\n</item>', s)

 return s1
]]></expres>
<page>https://vbprofi.lima-city.de/rss/index.php</page>
<agent>Mozilla/5.0 (iPhone; CPU iPhone OS 9_2 like Mac OS X) AppleWebKit/601.1 (KHTML, like Gecko) CriOS/47.0.2526.70 Mobile/13C71 Safari/601.1.46</agent>
<cookieJar></cookieJar>
<!--
<page>https://anfturkce.com/feed.rss</page>
<page>https://vbprofi.lima-city.de/rss/index.php</page>
<referer>https://vbprofi.lima-city.de/rss/index.php</referer>
<Accept>text/html, application/xhtml+xml, image/jxr, */*</Accept>
<Connection>keep-alive</Connection>
<keep-alive></keep-alive>
<noredirect>false</noredirect>
<includeheaders/>
-->
</regex>

<regex>
<name>text</name>
<expres><![CDATA[#$pyFunction
import xbmcgui
import re
import HTMLParser

def GetLSProData(page_data,Cookie_Jar,m):#vbprofi

 txt = """'[main.param2]'"""
 txt = txt.strip()
 header = re.findall(r'(?s)<[H|h].*?>(.*?)</[H|h]', txt)[0]
 leader = re.findall(r'(?s)lead">(.*?)</p>', txt)[0]
 text = re.findall(r'(?s)(.*?)', txt)[0].replace('<p>', '\n').replace('</p>', '')

 dialog = xbmcgui.Dialog()
 dialog.textviewer('[main.param1] - [main.param4]', header + '\n\n' + leader + '\n\n' + text)
 return null
]]></expres>
<page></page>
</regex>
</item>



<item>
<title></title>
<link></link>

<regex>
<name></name>
<listrepeat><![CDATA[
<title></title>
<link></link>
<externallink></externallink>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
import HTMLParser
import sys
reload(sys)
sys.setdefaultencoding("utf-8")
def GetLSProData(page_data,Cookie_Jar,m):#vbprofi
 parser = HTMLParser.HTMLParser()
 s = re.sub("(&.+?;)", lambda m: parser.unescape(m.group()), page_data)
 s1 = re.findall(r'(?s)<item>\n<title>(.*?)</title>\n<description>(.*?)</description>\n<link>(.*?)</link>\n<pubDate>(.*?)</pubDate>\n<guid>(.*?)</guid>\n</item>', s)

 return s1
]]></expres>
<page>https://vbprofi.lima-city.de/rss/deutsch/index.php</page>
<referer>https://vbprofi.lima-city.de/rss/deutsch/index.php</referer>
<agent>Mozilla/5.0 (iPhone; CPU iPhone OS 9_2 like Mac OS X) AppleWebKit/601.1 (KHTML, like Gecko) CriOS/47.0.2526.70 Mobile/13C71 Safari/601.1.46</agent>
<cookieJar></cookieJar>
<!--
<Accept>text/html, application/xhtml+xml, image/jxr, */*</Accept>
<Connection>keep-alive</Connection>
<keep-alive></keep-alive>
<noredirect>false</noredirect>
<includeheaders/>
-->
</regex>

<regex>
<name></name>
<expres><![CDATA[#$pyFunction
import xbmcgui
import re
import HTMLParser

def GetLSProData(page_data,Cookie_Jar,m):#vbprofi

 txt = """'[main.param2]'"""
 txt = txt.strip()
 header = re.findall(r'(?s)<[H|h].*?>(.*?)</[H|h]', txt)[0]
 leader = re.findall(r'(?s)lead">(.*?)</p>', txt)[0]
 text = re.findall(r'(?s)(.*?)', txt)[0].replace('<p>', '\n').replace('</p>', '')

 dialog = xbmcgui.Dialog()
 dialog.textviewer('[main.param1] - [main.param4]', header + '\n\n' + leader + '\n\n' + text)
 return null
]]></expres>
<page></page>
</regex>
</item>





<item>
<title></title>
<link></link>

<regex>
<name></name>
<listrepeat><![CDATA[
<title>[tag.param2]</title>
<link>$doregex[sender]</link>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):#vbprofi
 return re.findall('<OPTION.*?VALUE="(.*?)".*?>(.*?)</OPTION>', re.findall("ID='wochentag'(?s)(.*?)</SELECT><SELECT ID='sender'", page_data)[0])
]]></expres>
<page></page>
</regex>

<regex>
<name>sender</name>
<listrepeat><![CDATA[
<title>[sender.param2]</title>
<link>$doregex[makelist]</link>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):#vbprofi
 return re.findall('<option value="(.*?)">(.*?)</option>', re.findall("ID='sender'(?s)(.*?)</SELECT><SELECT ID=\"tageszeit\"", page_data)[0])
]]></expres>
<page>https://www.hoerzu.de/text/tv-programm/sender.php</page>
</regex>

<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[makelist.param2]</title>
<link>$doregex[info]</link>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):#vbprofi
# return re.findall('<h3>(?s)(.*?)</h3>', page_data)
 return re.findall('href="(.*?)".*?>(.*?)</a>', page_data)
]]></expres>
<page>https://www.hoerzu.de/text/tv-programm/sender.php</page>
<rawpost>timeday=ganztags&amp;submit=Anzeigen&amp;newday=[tag.param1]&amp;tvchannelid=[sender.param1]</rawpost>
<cookieJar></cookieJar>
</regex>

<regex>
<name>info</name>
<expres><![CDATA[#$pyFunction
import re
import xbmcgui
import xbmc
def GetLSProData(page_data,Cookie_Jar,m):#vbprofi
 txt = re.findall('<span class="tabtextbold">(?s)(.*?)<a href="', page_data)[0].replace('</span>', ' ').replace('<br/>', '\n').replace('<BR/>', '\n')
 dialog = xbmcgui.Dialog()
 dialog.textviewer('Programm-Information', cleanhtml(txt))
# return null

def cleanhtml(raw_html):
 cleanr = re.compile('<.*?>')
 cleantext = re.sub(cleanr, '\n', raw_html)
 return cleantext.replace('&nbsp;', ' ')
]]></expres>
<page></page>
</regex>
</item>


<!--
<item>
<title></title>
<link></link>
<externallink></externallink>
</item>
-->




</items>
